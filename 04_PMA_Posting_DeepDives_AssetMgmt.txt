================================================================================
D365 F&O KNOWLEDGE BASE — FILE 4 OF 5
CONSOLIDATED FOR: Claude.Code Migration
CONTENTS: PMA Ledger Posting Framework Deep-Dives + Asset Management (EAM)
          — DeepSeek Round 1: Posting Profile Matrix, Financial Validation,
            Revenue Recognition (POC), Fixed-Price vs T&M
          — DeepSeek Round 2: Inter-Company, Production Order Integration,
            Tax, Retention, WIP Reversal, Advanced Revenue Recognition
          — Asset Management: Preventive Maintenance Work Orders (EAM),
            Three Architectural Paths (OOB, Power Platform, X++)
ORIGINAL SOURCES: DeepSeek_D365_F_O_Proj_Mang___Acc_20260702.txt,
                  deepseek_text_20260207_0c6923.txt,
                  Asset_Management_1.txt
DATE CONSOLIDATED: 2026-02-16
================================================================================

========================================================================================================================
SOURCE: DeepSeek_D365_F_O_Proj_Mang___Acc_20260702.txt
TOPIC: PMA Ledger Posting Framework — Round 1 (Posting Profile Matrix, POC)
========================================================================================================================

ACTING AS: SENIOR D365 F&O FINANCIAL & PMA ARCHITECT.
TASK: TECHNICAL DEEP-DIVE INTO LEDGER POSTING FRAMEWORK FOR PMA (FIXED-PRICE & T&M).
STATUS: INITIATED.
ZERO-HALLUCINATION PROTOCOL: ENGAGED. CROSS-REFERENCING OFFICIAL MICROSOFT LEARN 'PROJECT POSTING' (ARTICLES: LearnID 12925, 328322, 164730).

PRELIMINARY NOTE: AMBIGUITY DETECTED. PROJECT GROUP CONFIGURATION (PARTICULARLY 'POSTING' FASTTAB) IS CRITICAL. TO PROCEED, PROVIDE: (1) REVENUE RECOGNITION METHOD (PERCENTAGE/COMPLETED CONTRACT/NONE), (2) COST AND REVENUE POSTING SETUP FOR WIP/RDEFERRAL, (3) DEFERRED PROFIT CONFIGURATION. ASSUMING STANDARD CONFIG FOR ANALYSIS.

--------------------------------------------------------------------
POSTING PROFILE MATRIX
--------------------------------------------------------------------
PRIMARY SOURCE: PROJECT GROUPS -> 'LEDGER POSTING' SETUP. REF: MS LEARN 12925.
TABLE MAPS TRANSACTION -> SUBTYPE -> LEDGER ACCOUNT CATEGORY (LAC).

+------------------+--------------------------+-------------------------------------+-------------------------------------+
| TRANSACTION TYPE | SUBTYPE/CATEGORY         | FIXED-PRICE PROJECT (KEY LACs)      | TIME & MATERIAL PROJECT (KEY LACs)  |
+------------------+--------------------------+-------------------------------------+-------------------------------------+
| HOUR             | COST (EMPLOYEE/ VENDOR)  | LAC: COST                           | LAC: COST                           |
|                  |                          | (DEBIT: WIP-TYPE ACCOUNT*)          | (DEBIT: P&L EXPENSE ACCOUNT)        |
|                  |                          | (CREDIT: ACCRUAL)                   | (CREDIT: ACCRUAL)                   |
+------------------+--------------------------+-------------------------------------+-------------------------------------+
| HOUR             | REVENUE (SALES PRICE)    | LAC: REVENUE - PRODUCTIVE/NON-PROD  | LAC: REVENUE - PRODUCTIVE/NON-PROD  |
|                  |                          | (DEBIT: RDEFERRAL)                  | (DEBIT: ACCOUNTS RECEIVABLE)        |
|                  |                          | (CREDIT: RDEFERRAL)                 | (CREDIT: REVENUE)                   |
+------------------+--------------------------+-------------------------------------+-------------------------------------+
| EXPENSE          | COST                     | LAC: COST                           | LAC: COST                           |
|                  |                          | (DEBIT: WIP-TYPE ACCOUNT*)          | (DEBIT: P&L EXPENSE ACCOUNT)        |
|                  |                          | (CREDIT: ACCRUAL/BANK)              | (CREDIT: ACCRUAL/BANK)              |
+------------------+--------------------------+-------------------------------------+-------------------------------------+
| EXPENSE          | REVENUE (SALES PRICE)    | LAC: REVENUE                        | LAC: REVENUE                        |
|                  |                          | (DEBIT: RDEFERRAL)                  | (DEBIT: ACCOUNTS RECEIVABLE)        |
|                  |                          | (CREDIT: RDEFERRAL)                 | (CREDIT: REVENUE)                   |
+------------------+--------------------------+-------------------------------------+-------------------------------------+
| ITEM             | COST                     | LAC: ITEM (COGS)                    | LAC: ITEM (COGS)                    |
|                  |                          | (DEBIT: WIP-TYPE ACCOUNT*)          | (DEBIT: P&L COST ACCOUNT)           |
|                  |                          | (CREDIT: INVENTORY)                 | (CREDIT: INVENTORY)                 |
+------------------+--------------------------+-------------------------------------+-------------------------------------+
| ITEM             | REVENUE (SALES PRICE)    | LAC: REVENUE                        | LAC: REVENUE                        |
|                  |                          | (DEBIT: RDEFERRAL)                  | (DEBIT: ACCOUNTS RECEIVABLE)        |
|                  |                          | (CREDIT: RDEFERRAL)                 | (CREDIT: REVENUE)                   |
+------------------+--------------------------+-------------------------------------+-------------------------------------+
| FEE              | REVENUE                  | LAC: REVENUE                        | LAC: REVENUE                        |
|                  |                          | (DEBIT: RDEFERRAL)                  | (DEBIT: ACCOUNTS RECEIVABLE)        |
|                  |                          | (CREDIT: RDEFERRAL)                 | (CREDIT: REVENUE)                   |
+------------------+--------------------------+-------------------------------------+-------------------------------------+
| ON-ACCOUNT       | NOT APPLICABLE           | LAC: ON-ACCOUNT                     | LAC: ON-ACCOUNT                     |
|                  |                          | (DEBIT: ACCOUNTS RECEIVABLE)        | (DEBIT: ACCOUNTS RECEIVABLE)        |
|                  |                          | (CREDIT: RDEFERRAL)                 | (CREDIT: REVENUE)                   |
+------------------+--------------------------+-------------------------------------+-------------------------------------+

*WIP-TYPE ACCOUNT DEFINITION: DEPENDS ON PROJECT GROUP SETUP FOR 'COST' AND 'REVENUE'.
 WIP ACCOUNT CATEGORIES INCLUDE: WIP-COST, WIP-COST-SALES, WIP-COST ACCRUAL, WIP-SALES.
 RDEFERRAL = DEFERRED REVENUE ACCOUNT.
 CRITICAL: FOR T&M, REVENUE TYPICALLY POSTS DIRECTLY TO P&L (DEFERRED REVENUE NOT USED FOR HOUR/EXPENSE/ITEM).
 EXCEPTION: T&M WITH 'FEE' TRANSACTION AND REVENUE RECOGNITION ENABLED MAY USE DEFERRALS.

VERSION NOTE: AS OF D365 FO 10.0.38 (AUG 2023), REVENUE RECOGNITION FEATURE MUST BE EXPLICITLY ENABLED.
IF ENABLED, DEFERRED REVENUE (RDEFERRAL) IS USED FOR REVENUE AMOUNTS, AND A SCHEDULE CONTROLS P&L RECOGNITION.
THIS IMPACTS BOTH FIXED-PRICE AND T&M IF THE FEATURE IS TURNED ON FOR THE PROJECT. REF: MS LEARN 328322.

--------------------------------------------------------------------
FINANCIAL VALIDATION
--------------------------------------------------------------------
STEP-BY-STEP GUIDE TO VERIFY PROJECT LEDGER POSTING FORM MAPPINGS.

STEP 1: VALIDATE HIERARCHY.
NAVIGATE: PROJECT MANAGEMENT AND ACCOUNTING > SETUP > POSTING > PROJECT LEDGER POSTING.
CONFIRM: CORRECT LEGAL ENTITY IS SELECTED IN THE PAGE HEADER.
CONFIRM: 'POSTING DEFINITION' DROPDOWN FILTER IS SET TO 'ALL'.

STEP 2: VALIDATE POSTING TYPE SETUP FOR EACH PROJECT GROUP.
ACTION: SELECT A PROJECT GROUP ROW. CLICK 'POSTING SETUP' BUTTON.
EXPECTED SCREEN: 'PROJECT POSTING' FORM WITH TABS: 'SALES', 'COST', 'ON-ACCOUNT', 'SUB-  LEDGER'.

STEP 3: AUDIT KEY LEDGER ACCOUNT CATEGORY (LAC) MAPPINGS.
IN 'COST' TAB:
- VERIFY 'COST' LAC MAPS TO CORRECT WIP OR P&L ACCOUNT (E.G., 602000).
- VERIFY 'COST-ACCURAL' LAC FOR VENDOR/EMPLOYEE LIABILITY (E.G., 200100).
IN 'SALES' TAB:
- VERIFY 'REVENUE' LAC MAPS TO DEFERRED REVENUE (FIXED) OR DIRECT REVENUE (T&M) (E.G., 400100 OR 290000).
- VERIFY 'RDEFERRAL' LAC IF USING REVENUE RECOGNITION (E.G., 290000).
- VERIFY 'WIP-COST', 'WIP-COST-SALES', 'WIP-SALES' ACCOUNTS ARE MAPPED FOR FIXED-PRICE PROJECTS.
IN 'ON-ACCOUNT' TAB:
- VERIFY 'ON-ACCOUNT' LAC MAPS TO DEFERRED REVENUE (FIXED) OR DIRECT REVENUE (T&M).

STEP 4: CROSS-REFERENCE WITH PROJECT CONTRACT.
NAVIGATE TO A SPECIFIC PROJECT > PROJECT CONTRACT.
CONFIRM: PROJECT GROUP MATCHES THE ONE AUDITED.
CONFIRM: 'REVENUE RECOGNITION' FASTTAB SETTINGS (METHOD, SCHEDULE) ALIGN WITH POSTING PROFILE.
IF REV RECOG METHOD = "PERCENTAGE OF COMPLETION", WIP ACCOUNTS ARE ACTIVE.

STEP 5: GENERATE TEST TRANSACTION AND REVIEW VOUCHER.
PROCEDURE: ENTER A PROJECT HOUR TRANSACTION AND POST. USE INQUIRY > PROJECT TRANSACTIONS.
OPEN THE RELATED VOUCHER (LEDGER VOUCHER).
VALIDATE: EACH LINE'S ACCOUNT MATCHES THE EXPECTED LAC MAPPING FROM THE MATRIX ABOVE.
KEY CHECK: FOR FIXED-PRICE COST, DEBIT SHOULD BE A BALANCE SHEET (WIP) ACCOUNT, NOT P&L.

--------------------------------------------------------------------
REVENUE RECOGNITION AUDIT
--------------------------------------------------------------------
FOCUS: PERCENTAGE OF COMPLETION (POC) METHOD FOR FIXED-PRICE PROJECTS. REF: MS LEARN 164730.

CALCULATION LOGIC:
POC % = (TOTAL COST TO DATE) / (ESTIMATED TOTAL COST AT COMPLETION)
WHERE:
- TOTAL COST TO DATE = SUM OF POSTED COSTS (HOUR, EXPENSE, ITEM) FOR PROJECT.
- ESTIMATED TOTAL COST = PROJECT ESTIMATE (MANAGED VIA 'ESTIMATE' FORM OR CONTRACT LINE QUANTITY * COST PRICE).
- THIS DATA IS HOUSED IN THE 'PROJECT ENTITY' AND 'PROJECT SALES FORECAST' TABLES.

LEDGER IMPACT (BALANCE SHEET VS. P&L) DURING PERIOD-END:

1. REVENUE RECOGNITION JOURNAL (PROCESS: PROJECT > PERIODIC > REVENUE RECOGNITION > CREATE REV RECOG JOURNAL).
   - CALCULATES: RECOGNIZABLE REVENUE = (POC % * TOTAL CONTRACT REVENUE) - PREVIOUSLY RECOGNIZED REVENUE.
   - POSTING:
     DEBIT: DEFERRED REVENUE ACCOUNT (RDEFERRAL) - BALANCE SHEET
     CREDIT: REVENUE ACCOUNT - PROFIT & LOSS
   - RESULT: DEFERRED REVENUE (LIABILITY) DECREASES, EARNED REVENUE INCREASES.

2. WIP ADJUSTMENT (PROCESS: PROJECT > PERIODIC > WIP > CALCULATE WIP AND ADJUST).
   - CALCULATES: WIP COST VALUE = TOTAL COST TO DATE - COST OF SALES (BASED ON POC).
   - POSTING FOR WIP-COST (BALANCE SHEET ASSET):
     DEBIT: WIP-COST ACCOUNT (BALANCE SHEET) - IF POSITIVE
     CREDIT: COST ACCOUNT (P&L) - REDUCTION OF COST EXPENSE
   - POSTING FOR WIP-SALES (BALANCE SHEET LIABILITY, IF ENABLED):
     DEBIT: REVENUE ACCOUNT (P&L) - REDUCTION OF REVENUE
     CREDIT: WIP-SALES ACCOUNT (BALANCE SHEET)

3. FINANCIAL STATEMENT EFFECT (CONSOLIDATED VIEW):
   - BALANCE SHEET:
     * ASSETS: WIP-COST ACCOUNT (REPRESENTS UNBILLED COSTS).
     * LIABILITIES: DEFERRED REVENUE (UNEARNED), WIP-SALES (IF USED).
   - PROFIT & LOSS:
     * REVENUE: RECOGNIZED AMOUNT VIA POC.
     * COST: COST OF SALES (= POC % * TOTAL ESTIMATED COST).

VERSION-SPECIFIC LOGIC:
IN VERSIONS PRIOR TO 10.0.36, REVENUE RECOGNITION AND WIP WERE TIGHTLY COUPLED.
FROM 10.0.36+, THE 'REVENUE RECOGNITION' FEATURE PROVIDES A MORE GRANULAR, SCHEDULE-BASED DEFERRAL MECHANISM.
FOR POC, THE 'ESTIMATE' ENTITY MUST BE CORRECTLY MAINTAINED, AS IT FEEDS THE % CALCULATION.
ALWAYS CHECK THE 'REVENUE RECOGNITION SCHEDULE' FOR THE PROJECT CONTRACT FOR DEFERRED REVENUE MOVEMENTS.

AUDIT TRAIL:
KEY TABLES TO QUERY:
- PROJCDLTRANS (COST/REVENUE TRANSACTIONS)
- PROJREVENUERECOGNITION (REV REC SCHEDULE DETAILS)
- PROJWIP (WIP TRANSACTIONS)
- PROJCONTROLLEDBUDGET (ESTIMATED COST)

END OF DEEP-DIVE.
REQUEST PROJECT GROUP CONFIGURATION FOR SPECIFIC SCENARIO VALIDATION.

========================================================================================================================
SOURCE: deepseek_text_20260207_0c6923.txt
TOPIC: PMA Ledger Posting Framework — Round 2 (Inter-Company, Production, Tax, Advanced WIP)
========================================================================================================================

ACTING AS: SENIOR D365 F&O FINANCIAL & PMA ARCHITECT.
TASK: TECHNICAL DEEP-DIVE - ADDITIONAL LAYERS OF LEDGER POSTING FRAMEWORK FOR PMA.
STATUS: INITIATED - ROUND 2.
ZERO-HALLUCINATION PROTOCOL: ENGAGED. CROSS-REFERENCING MS LEARN ARTICLES: 12926 (Project groups), 972 (Production orders), 13083 (Tax).

NOTICE: THIS DEEP-DIVE COVERS PREVIOUSLY UNTOUCHED AREAS: INTER-COMPANY, PRODUCTION ORDER INTEGRATION, TAX, AND ADVANCED WIP SCENARIOS.
CLARIFICATION STILL REQUIRED: PROJECT GROUP SETUP FOR 'INDIRECT COST COMPONENTS' AND 'FUNDING SOURCE' POSTING RULES.

--------------------------------------------------------------------
POSTING PROFILE MATRIX - SUPPLEMENTARY & ADVANCED
--------------------------------------------------------------------
THIS MATRIX COVERS TRANSACTIONS AND ACCOUNT CATEGORIES NOT IN PRIOR ANALYSIS. REF: MS LEARN 12926.

+---------------------+--------------------------+------------------------------------------------------+
| TRANSACTION ORIGIN  | LEDGER ACCOUNT CATEGORY  | POSTING BEHAVIOR & SPECIFIC ACCOUNT PURPOSE         |
+---------------------+--------------------------+------------------------------------------------------+
| INTER-COMPANY HOUR  | COST (INTER-COMPANY)     | DEBIT: INTER-COMPANY COST (P&L) ON CONSUMING LEGAL  |
| (PROJECT IN LEGAL   |                          | ENTITY.                                              |
| ENTITY A, RESOURCE  |                          | CREDIT: INTER-COMPANY ACCRUAL (BALANCE SHEET) FOR   |
| FROM LEGAL ENTITY B)|                          | THE LABOR LIABILITY.                                 |
|                     |                          | OFFSET POSTING IN SUPPLYING LEGAL ENTITY VIA        |
|                     |                          | INTER-COMPANY TRADING PARTNER SETUP.                |
+---------------------+--------------------------+------------------------------------------------------+
| PRODUCTION ORDER    | ITEM (COGS) - PROD       | WHEN A PRODUCTION ORDER IS LINKED TO A PROJECT VIA  |
| CONSUMPTION (RAW    |                          | 'PROJECT' TYPE PRODUCTION ORDER, MATERIAL ISSUE:    |
| MATERIAL)           |                          | DEBIT: WIP-COST OR PROJECT COST ACCOUNT (PER        |
|                     |                          | PROJECT GROUP).                                      |
|                     |                          | CREDIT: RAW MATERIAL INVENTORY ACCOUNT.             |
|                     |                          | KEY: CONTROLLED BY PRODUCTION PARAMETERS -> 'POST   |
|                     |                          | PHYSICAL' & 'POST FINANCIAL' FOR PROJECT.           |
+---------------------+--------------------------+------------------------------------------------------+
| PRODUCTION ORDER    | ITEM (COGS) - PROD       | WHEN PRODUCTION ORDER IS REPORTED AS FINISHED:      |
| OUTPUT (FINISHED GOOD|                          | DEBIT: FINISHED GOOD INVENTORY (AT STANDARD COST).  |
| OR SERVICE)         |                          | CREDIT: WIP-COST ACCOUNT (REVERSING ACCUMULATED COST)|
|                     |                          | ANY PRODUCTION VARIANCES POST TO STANDARD VARIANCE  |
|                     |                          | ACCOUNTS, NOT PROJECT ACCOUNTS.                     |
+---------------------+--------------------------+------------------------------------------------------+
| TAX (SALESTAX / VAT)| TAX (LIABILITY)          | FOR PROJECT REVENUE TRANSACTIONS (INVOICE PROPOSAL),|
|                     |                          | TAX IS CALCULATED PER TAX CODES.                    |
|                     |                          | POSTING: DEBIT: ACCOUNTS RECEIVABLE (GROSS)         |
|                     |                          |         CREDIT: DEFERRED/REVENUE (NET)              |
|                     |                          |         CREDIT: TAX PAYABLE (TAX)                   |
|                     |                          | TAX ACCOUNT IS DEFINED IN TAX LEDGER POSTING GROUPS,|
|                     |                          | NOT IN PROJECT LEDGER POSTING.                      |
+---------------------+--------------------------+------------------------------------------------------+
| RETENTION           | RETENTION (LIABILITY)   | IF CONTRACT HAS RETENTION %, UPON INVOICING:        |
|                     |                          | DEBIT: ACCOUNTS RECEIVABLE (NON-RETAINED AMOUNT)    |
|                     |                          | DEBIT: RETENTION RECEIVABLE (CURRENT ASSET)         |
|                     |                          | CREDIT: DEFERRED REVENUE / REVENUE (FULL AMOUNT)    |
|                     |                          | UPON RETENTION SETTLEMENT:                          |
|                     |                          | DEBIT: CASH/BANK                                    |
|                     |                          | CREDIT: RETENTION RECEIVABLE                        |
+---------------------+--------------------------+------------------------------------------------------+
| REVERSAL (WIP       | WIP-REVERSAL (SPECIAL)  | WHEN A COST TRANSACTION IS REVERSED (E.G., CORRECTED|
| OR COST)            |                          | HOUR), THE SYSTEM MUST REVERSE THE ORIGINAL WIP     |
|                     |                          | POSTING. THE 'WIP-REVERSAL' LAC CAN BE MAPPED TO A  |
|                     |                          | CLEARING ACCOUNT TO TRACK ADJUSTMENTS. PRIMARY LOGIC|
|                     |                          | IS DRIVEN BY THE 'REVERSE' CHECKBOX IN WIP          |
|                     |                          | CALCULATION PARAMETERS.                             |
+---------------------+--------------------------+------------------------------------------------------+

--------------------------------------------------------------------
FINANCIAL VALIDATION - SUPPLEMENTARY CHECKS
--------------------------------------------------------------------

STEP 6: VALIDATE INDIRECT COST COMPONENT POSTING.
NAVIGATE: PROJECT MANAGEMENT AND ACCOUNTING > SETUP > INDIRECT COST COMPONENTS.
FOR EACH COMPONENT (E.G., OVERHEAD, FRINGE), A 'POSTING' DEFINITION EXISTS.
ACTION: FOR EACH INDIRECT COST COMPONENT, CLICK 'POSTING'.
EXPECTED: A FORM SIMILAR TO PROJECT LEDGER POSTING OPENS.
CRITICAL CHECK: THE 'LEDGER ACCOUNT CATEGORY' FOR THE INDIRECT COST ITSELF MUST BE MAPPED (E.G., 'COST-OVERHEAD'). THIS ACCOUNT RECEIVES THE DEBIT. THE OFFSET (CREDIT) IS TYPICALLY AN ACCRUAL ACCOUNT.
VALIDATION: WHEN INDIRECT COST IS CALCULATED AND POSTED VIA 'INDIRECT COST COMPENSATION', THE VOUCHER SHOULD SHOW DEBIT TO THIS OVERHEAD COST ACCOUNT AND CREDIT TO AN ACCRUAL.

STEP 7: VALIDATE FUNDING SOURCE POSTING.
NAVIGATE: PROJECT MANAGEMENT AND ACCOUNTING > SETUP > POSTING > FUNDING SOURCE POSTING.
THIS CONTROLS POSTING FOR GRANT-FUNDED OR MULTI-SOURCE PROJECTS.
CHECK: FOR EACH FUNDING SOURCE AND TRANSACTION TYPE (COST, REVENUE), A SPECIFIC LEDGER ACCOUNT CATEGORY CAN BE DEFINED.
EXAMPLE: A FEDERAL GRANT MAY REQUIRE COSTS TO POST TO A SPECIFIC DEPARTMENT OR SEGMENTED ACCOUNT. THIS OVERRIDES THE DEFAULT PROJECT GROUP POSTING.
VERIFICATION: CREATE A TRANSACTION AGAINST A FUNDED PROJECT LINE AND CONFIRM THE ACCOUNT IN THE VOUCHER MATCHES THE FUNDING SOURCE POSTING RULE, NOT THE BASE PROJECT GROUP RULE.

STEP 8: VALIDATE SUBLEDGER-TO-GENERAL LEDGER RECONCILIATION PATH.
TOOL: USE THE 'PROJECT ACCOUNT RECONCILIATION' WORKSPACE.
PROCEDURE: SELECT A PROJECT AND PERIOD. RUN 'VERIFY TRANSACTIONS'.
THE TOOL COMPARES:
- PROJECT SUBLEDGER TOTALS (PROJCDLTRANSAMOUNT) FOR EACH FINANCIAL DIMENSION SET.
- GENERAL LEDGER TOTALS (LEDGERTRANSAMOUNT) FOR THE PROJECT'S POSTING ACCOUNTS (WIP, REVENUE, COST).
DISCREPANCIES INDICATE:
1. MANUAL JOURNAL ENTRIES POSTED DIRECTLY TO PROJECT ACCOUNTS (PROHIBITED).
2. MISMATCHED FINANCIAL DIMENSIONS BETWEEN SUBLEDGER AND GENERAL LEDGER POSTING RULES.
RESOLUTION: ENSURE 'APPLY LEDGER SETTINGS' IN PROJECT GROUP POSTING IS CONSISTENT WITH LEDGER SETUP.

--------------------------------------------------------------------
REVENUE RECOGNITION AUDIT - ADVANCED SCENARIOS
--------------------------------------------------------------------

SCENARIO 1: COMPLETED CONTRACT METHOD (NON-POC).
CONFIGURATION: PROJECT CONTRACT > REVENUE RECOGNITION METHOD = "COMPLETED CONTRACT".
BEHAVIOR: NO REVENUE OR COST OF SALES IS RECOGNIZED TO P&L UNTIL THE PROJECT IS MARKED COMPLETE (OR A MILESTONE IS 100% DELIVERABLE).
PERIODIC POSTINGS:
- ALL COSTS ACCUMULATE IN WIP-COST ACCOUNTS (BALANCE SHEET ASSET).
- ALL BILLED AMOUNT ACCUMULATE IN DEFERRED REVENUE (BALANCE SHEET LIABILITY).
UPON COMPLETION: A MANUAL OR BATCH PROCESS (REVENUE RECOGNITION/JOURNAL) POSTS:
DEBIT: DEFERRED REVENUE (FULL CONTRACT AMOUNT)
CREDIT: REVENUE (FULL CONTRACT AMOUNT)
AND SIMULTANEOUSLY:
DEBIT: COST OF SALES (TOTAL ACCUMULATED COST)
CREDIT: WIP-COST (TOTAL ACCUMULATED COST)
AUDIT POINT: ENSURE WIP BALANCES ARE NOT NEGATIVE. DEFERRED REVENUE SHOULD EQUAL TOTAL INVOICED.

SCENARIO 2: MULTI-ELEMENT ARRANGEMENTS & ALLOCATION OVERRIDES.
MECHANISM: WITHIN A PROJECT CONTRACT, INDIVIDUAL CONTRACT LINES CAN HAVE DIFFERENT REVENUE RECOGNITION DATES/METHODS (SCHEDULES).
POSTING IMPACT: EACH CONTRACT LINE'S DEFERRED REVENUE ACCOUNT (RDEFERRAL) IS TRACKED SEPARATELY IN THE REVENUE RECOGNITION SCHEDULE.
ALLOCATION: THE SALES VALUE ON A PROJECT INVOICE PROPOSAL MAY BE ALLOCATED ACROSS CONTRACT LINES BASED ON 'ALLOCATION RULES' OR MANUAL OVERRIDES.
AUDIT TRAIL: QUERY 'PROJREVENUERECOGNITION' TABLE JOINED TO 'PROJINVOICEJOUR' AND 'PROJCONTROLLINE'. THE 'REMAINING SALES VALUE' FIELD SHOULD DECREASE WITH EACH RECOGNITION EVENT.

SCENARIO 3: WIP AND RDEFERRAL FOR T&M PROJECTS WITH CAP.
CONFIGURATION: T&M PROJECT WITH A 'CAP' (MAXIMUM INVOICE LIMIT) AND 'OVERRUN' POSTING SET TO "WIP".
BEHAVIOR:
- COSTS POST TO P&L AS INCURRED (STANDARD T&M).
- REVENUE POSTS TO P&L AS BILLED (STANDARD T&M).
- ONCE ACCUMULATED COSTS + PROFIT MARGIN MEET THE CAP, SUBSEQUENT COSTS ARE POSTED TO A WIP ACCOUNT (BALANCE SHEET) INSTEAD OF P&L.
POSTING LOGIC: DRIVEN BY THE 'PROJECT GROUP' > 'POSTING' FASTTAB > 'OVER RUN' SETTING.
AUDIT: MONITOR THE 'PROJECT STATEMENT' REPORT. THE 'COST AND REVENUE' SECTION WILL SHOW COSTS MOVING FROM P&L COLUMN TO 'WIP' COLUMN AFTER THE CAP IS REACHED.

VERSION-SPECIFIC NOTE: THE 'PROJECT REVENUE RECOGNITION' FRAMEWORK (INTRODUCED IN 10.0.36) SEPARATES THE CONCEPTS OF 'BILLING' AND 'REVENUE EARNED' MORE CLEARLY. FOR T&M WITH CAP, USING THIS FRAMEWORK ALLOWS FOR SMOOTHER DEFERRAL OF REVENUE ABOVE THE CAP, RATHER THAN JUST DEFERRING COSTS TO WIP.

END OF SUPPLEMENTAL DEEP-DIVE.
FOR FURTHER PRECISION, PROVIDE CONFIGURATION DETAILS FOR: INDIRECT COST COMPONENTS AND FUNDING SOURCE SETUP.

========================================================================================================================
SOURCE: Asset_Management_1.txt
TOPIC: Enterprise Asset Management — Preventive Maintenance Work Orders
========================================================================================================================

# Technical & Functional Overview: Preventive Maintenance Work Orders in Dynamics 365 F&O

## **1. Introduction & Business Context**
Preventive Maintenance (PM) Work Orders are scheduled maintenance activities performed on assets to prevent failure, extend asset life, and ensure operational reliability. In D365 F&O, this is managed via the **Enterprise Asset Management (EAM)** module, integrated with Fixed Assets, Procurement, and Production Control.

## **2. Core D365 F&O Entities & Relationships**
- **Functional Locations:** Hierarchical structure (e.g., Plant â†’ Production Line â†’ Work Cell) where assets are installed.
- **Asset Types:** Classification of assets (e.g., CNC Machine, HVAC System) determining default attributes and maintenance jobs.
- **Maintenance Job Types:** Standardized tasks (e.g., "Calibrate," "Replace Filter") linked to maintenance checklists, tools, and skill requirements.
- **Preventive Maintenance Plans:** Define intervals (time-based or meter-based) triggering work order creation.
- **Work Orders:** The core entity containing asset, job list, scheduling, cost estimates, and execution history.
- **Work Order Lifecycle:** *Created* â†’ *Scheduled* â†’ *Started* â†’ *Ended* â†’ *Posted* (financial integration).

## **3. Integration Points**
- **Fixed Assets:** Asset master data syncs; maintenance costs can be capitalized via the Fixed Assets module.
- **Procurement & Sourcing:** Spare parts create purchase requisitions or inventory picks; vendor contracts for external maintenance services.
- **Production Control:** Downtime scheduling integrates with production orders and resource calendars.
- **General Ledger:** All labor, material, and vendor costs from work orders post to designated GL accounts.

---

## **4. Three Architectural Paths for Implementation**

### **Path 1: Standard Out-of-the-Box (OOB) Configuration**
**Description:** Utilize native EAM functionality with minimal configuration.
**High-Level Configuration Steps:**
1. **Configure Foundation Data:**
   - Set up EAM parameters (worksheet, calendar, default financial dimensions).
   - Create *Asset Types* and *Maintenance Job Type Catalogs*.
   - Define *Functional Location* hierarchy and *Worker Skills/Trades*.
2. **Create Asset Master:**
   - Register assets (*Assets* > *New*), assign to functional locations, link to Fixed Asset ID.
   - Attach required *Maintenance Checklists* and *Asset Attributes* (e.g., serial number, capacity).
3. **Define Preventive Maintenance Plans:**
   - Create a *PM plan* (e.g., "Quarterly CNC Calibration").
   - Set interval (e.g., 90 days) and *Maintenance Job Type* with checklist.
   - Attach plan to relevant assets.
4. **Automate Work Order Generation:**
   - Use *Schedule Maintenance Plans* to generate future work orders automatically.
   - Configure *Maintenance Rounds* for grouped execution on multiple assets.
5. **Execute & Close:**
   - Schedule work orders, assign crews, reserve parts from inventory.
   - Record actual hours/consumption via *Work Order Journals*.
   - End and post work order to trigger financial posting.

**Pros & Cons:**
| **Aspect**          | **Pros**                                      | **Cons**                                      |
|----------------------|-----------------------------------------------|-----------------------------------------------|
| **Time to Value**    | Fast deployment (2-4 weeks).                  | Limited to predefined D365 logic.             |
| **Maintenance Overhead** | Low (Microsoft-managed updates).             | Inflexible for unique business processes.     |

---

### **Path 2: Power Platform Integration**
**Description:** Extend OOB with Power Apps for mobile field execution and Power BI for predictive analytics.
**Key Components:**
- **Power Apps (Canvas App):** Offline-capable mobile app for technicians to view assignments, scan asset tags, complete checklists, and capture images.
- **Power Automate:** Trigger notifications for overdue work orders or low spare parts inventory.
- **Power BI:** Connect via Dataverse or Azure Data Lake for dashboards on MTTR, compliance rates, and cost analytics.

**Integration Pattern:** Use **Dual-write** or **Virtual entities** to sync D365 tables (WorkOrders, AssetHistory) to Dataverse for low-code access.

**Pros & Cons:**
| **Aspect**          | **Pros**                                      | **Cons**                                      |
|----------------------|-----------------------------------------------|-----------------------------------------------|
| **Time to Value**    | Moderate (4-8 weeks). Agile enhancements.     | Requires additional licensing and skills.     |
| **Maintenance Overhead** | Moderate (monitor integration pipelines).   | Potential sync latency/complexity.           |

---

### **Path 3: X++ Customization / Complex Integration**
**Description:** Custom X++ logic for advanced scenarios (e.g., real-time IoT sensor integration, complex scheduling algorithms).
**Example Scenario:** Custom service to ingest IoT data from Azure IoT Hub, predict failures using ML, and auto-create emergency work orders.

**Key Customization Areas:**
- Extend `WHSWorkOrder` table/class for custom fields (e.g., "PredictedFailureScore").
- Create custom service to consume IoT streams and update asset condition.
- Override scheduling engine (`SmmActivityScheduling`) for multi-site resource optimization.

**Pros & Cons:**
| **Aspect**          | **Pros**                                      | **Cons**                                      |
|----------------------|-----------------------------------------------|-----------------------------------------------|
| **Time to Value**    | Slow (3-6+ months).                           | Highest long-term ownership cost.             |
| **Maintenance Overhead** | Very high (regression testing, upgrade pains). | Requires deep X++/D365 expertise.            |

---

## **5. Solution Architectâ€™s Recommendation**
For a **Tier-1 enterprise** (multi-site, high-value assets, complex supply chain), I recommend a **hybrid approach**:

1. **Foundation:** Implement **Path 1 (OOB)** for core PM workflows to ensure stability, compliance, and quick ROI.
2. **Strategic Extension:** Simultaneously develop **Path 2 (Power Platform)** for field mobility and advanced analytics. This addresses common gaps without code.
3. **Customization Reserve:** Use **Path 3 (X++) only for unique differentiators** (e.g., custom predictive maintenance algorithms) after validating ROI.

**Rationale:** Tier-1 enterprises need scalability, supportability, and agility. The OOB + Power Platform combo maximizes Microsoftâ€™s innovation cycle while minimizing technical debt. Reserve X++ for scenarios where competitive advantage justifies the overhead.

---
*Note: Always conduct a fit-gap analysis and prototype complex integrations in a sandbox before full deployment.*
================================================================================
END OF FILE 4 OF 5
================================================================================
